{"version":3,"sources":["db/models/user.js"],"names":["User","Model","extend","tableName","hasTimestamps","initialize","on","hashPW","model","attrs","options","salt","genSaltSync","hash","hashSync","attributes","password","set","save","defaults","photo","projects","hasMany","userProjects","posts","wishes","likes","reports","transactions"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAO,oBAAGC,KAAH,CAASC,MAAT,CAAgB;AAC3BC,aAAW,MADgB;AAE3BC,iBAAe,IAFY;AAG3BC,cAAY,sBAAU;AACpB,SAAKC,EAAL,CAAQ,SAAR,EAAmB,KAAKC,MAAxB,EAAgC,IAAhC;AACD,GAL0B;AAM3BA,UAAQ,gBAASC,KAAT,EAAgBC,KAAhB,EAAuBC,OAAvB,EAA+B;AACrC,QAAIC,OAAO,mBAAOC,WAAP,CAAmB,EAAnB,CAAX;AACA,QAAIC,OAAO,mBAAOC,QAAP,CAAgBN,MAAMO,UAAN,CAAiBC,QAAjC,EAA2CL,IAA3C,CAAX;AACAH,UAAMS,GAAN,CAAU,UAAV,EAAsBJ,IAAtB,EAA4BK,IAA5B;AACD,GAV0B;AAW3BC,YAAU;AACRC,WAAO;AADC,GAXiB;AAc3BC,YAAU,oBAAY;AACpB,WAAO,KAAKC,OAAL,oBAAsB,QAAtB,CAAP;AACD,GAhB0B;AAiB3BC,gBAAc,wBAAY;AACxB,WAAO,KAAKD,OAAL,wBAA0B,QAA1B,CAAP;AACD,GAnB0B;AAoB3BE,SAAO,iBAAY;AACjB,WAAO,KAAKF,OAAL,iBAAmB,QAAnB,CAAP;AACD,GAtB0B;AAuB3BG,UAAQ,kBAAY;AAClB,WAAO,KAAKH,OAAL,iBAAmB,QAAnB,CAAP;AACD,GAzB0B;AA0B3BI,SAAO,iBAAY;AACjB,WAAO,KAAKJ,OAAL,iBAAmB,QAAnB,CAAP;AACD,GA5B0B;AA6B3BK,WAAS,mBAAY;AACnB,WAAO,KAAKL,OAAL,mBAAqB,QAArB,CAAP;AACD,GA/B0B;AAgC3BM,gBAAc,wBAAY;AACxB,WAAO,KAAKN,OAAL,wBAA0B,QAA1B,CAAP;AACD;AAlC0B,CAAhB,CAAb;;kBAqCetB,I","file":"db/models/user.js","sourcesContent":["import db from \"../config/setConfig\";\nimport bcrypt from \"bcryptjs\";\n\nimport Project from \"./project\";\nimport UserProject from \"./userProject\";\nimport Post from \"./post\";\nimport Wish from \"./wish\";\nimport Like from \"./like\";\nimport Report from \"./report\";\nimport Transaction from \"./transaction\";\n\nconst User = db.Model.extend({\n  tableName: \"user\",\n  hasTimestamps: true,\n  initialize: function(){\n    this.on(\"created\", this.hashPW, this);\n  },\n  hashPW: function(model, attrs, options){\n    let salt = bcrypt.genSaltSync(10);\n    let hash = bcrypt.hashSync(model.attributes.password, salt);\n    model.set(\"password\", hash).save();\n  },\n  defaults: {\n    photo: \"a6jnokqrjo9ptrsl1vgv\"\n  },\n  projects: function () {\n    return this.hasMany(Project, \"userId\");\n  },\n  userProjects: function () {\n    return this.hasMany(UserProject, \"userId\");\n  },\n  posts: function () {\n    return this.hasMany(Post, \"userId\");\n  },\n  wishes: function () {\n    return this.hasMany(Wish, \"userId\");\n  },\n  likes: function () {\n    return this.hasMany(Like, \"userId\");\n  },\n  reports: function () {\n    return this.hasMany(Report, \"userId\");\n  },\n  transactions: function () {\n    return this.hasMany(Transaction, \"userId\");\n  },\n});\n\nexport default User;\n"],"sourceRoot":"/source/"}