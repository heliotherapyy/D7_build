{"version":3,"sources":["api/auth/login.js"],"names":["login","req","res","next","authenticate","authErr","user","info","console","log","status","json","message","logIn","loginErr"],"mappings":";;;;;;AACA;;;;;;AAEA,IAAMA,QAAQ,SAARA,KAAQ,GAAM;AAClB,SAAO,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACzB,uBAASC,YAAT,CACE,OADF,EAEE,UAACC,OAAD,EAAUC,IAAV,EAAgBC,IAAhB,EAAyB;AACvB,UAAIF,OAAJ,EAAa;AACXG,gBAAQC,GAAR,CAAYJ,OAAZ;AACA,eAAOF,KAAKE,OAAL,CAAP;AACD;AACD,UAAI,CAACC,IAAL,EAAW;AACTE,gBAAQC,GAAR,CAAYF,IAAZ;AACA,eAAOL,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAASL,KAAKK,OAAhB,EAArB,CAAP;AACD;AACD,aAAOX,IAAIY,KAAJ,CAAUP,IAAV,EAAgB,UAACQ,QAAD,EAAc;AACnC,YAAIA,QAAJ,EAAc;AACZ,iBAAOZ,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAASE,QAAX,EAArB,CAAP;AACD,SAFD,MAEO;AACL,iBAAOZ,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,qBAAS;AADiB,WAArB,CAAP;AAGD;AACF,OARM,CAAP;AASD,KApBH,EAoBKX,GApBL,EAoBUC,GApBV,EAoBeC,IApBf;AAqBD,GAtBD;AAuBD,CAxBD,C,CAHA;kBA6BeH,K","file":"api/auth/login.js","sourcesContent":["/* Passport Login Handler */\nimport passport from \"passport\";\n\nconst login = () => {\n  return (req, res, next) => {\n    passport.authenticate(\n      \"local\",\n      (authErr, user, info) => {\n        if (authErr) {\n          console.log(authErr);\n          return next(authErr);\n        }\n        if (!user) {\n          console.log(info);\n          return res.status(401).json({ message: info.message });\n        }\n        return req.logIn(user, (loginErr) => {\n          if (loginErr) {\n            return res.status(401).json({ message: loginErr });\n          } else {\n            return res.status(200).json({\n              message: \"You have been successfully logged in.\"\n            });\n          }\n        });\n      })(req, res, next);\n  };\n};\n\nexport default login;\n"],"sourceRoot":"/source/"}