{"version":3,"sources":["api/report.js"],"names":["report","user","q","body","res","userId","id","postId","description","Post","where","fetch","then","post","Report","save","data","status","send","catch","err","console","error","end"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA;AACA;;AAEA,IAAMA,SAAS,SAATA,MAAS,CAACC,IAAD,EAAOC,CAAP,EAAUC,IAAV,EAAgBC,GAAhB,EAAwB;AACrC,MAAMC,SAASJ,KAAKK,EAApB;AADqC,MAE7BC,MAF6B,GAELJ,IAFK,CAE7BI,MAF6B;AAAA,MAErBC,WAFqB,GAELL,IAFK,CAErBK,WAFqB;;AAIrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AACA,mBAAMC,IAAN,CAAWC,KAAX,CAAiB,IAAjB,EAAuBH,MAAvB,EAA+BI,KAA/B,GACCC,IADD,CACM,UAACC,IAAD,EAAU;AACd,QAAIA,IAAJ,EAAU;AACR,aAAO,IAAI,iBAAMC,MAAV,CAAiB,EAACT,QAAQA,MAAT,EAAiBE,QAAQA,MAAzB,EAAiCC,aAAaA,WAA9C,EAAjB,EAA6EO,IAA7E,EAAP;AACD,KAFD,MAEO;AACL;AACA,YAAM,gBAAN;AACD;AACF,GARD,EASCH,IATD,CASM,UAACI,IAAD,EAAU;AACdZ,QAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AACD,GAXD,EAYCG,KAZD,CAYO,UAACC,GAAD,EAAS;AACdC,YAAQC,KAAR,CAAc,mEAAd,EAAmFF,GAAnF;AACAhB,QAAIa,MAAJ,CAAW,GAAX,EAAgBM,GAAhB;AACD,GAfD;AAiBD,CAjCD;;kBAmCevB,M","file":"api/report.js","sourcesContent":["import model from \"../db/models\";\nimport collection from \"../db/collections\";\nimport db from \"../db/config/setConfig\";\n\n/* Create new report in 'report' table */\n/* Post Data: postId, description */\n\nconst report = (user, q, body, res) => {\n  const userId = user.id;\n  const { postId, description } = body;\n\n  // Test code below\n  // let userId;\n  // if (user && user.id) {\n  //   userId = user.id;\n  // }\n  // if (q && q.id) {\n  //   userId = q.id;\n  // } else {\n  //   userId = 1;\n  // }\n\n  /* Start point */\n  model.Post.where(\"id\", postId).fetch()\n  .then((post) => {\n    if (post) {\n      return new model.Report({userId: userId, postId: postId, description: description}).save();\n    } else {\n      /* If there is no matching post, throw error */\n      throw \"Invalid postId\";\n    }\n  })\n  .then((data) => {\n    res.status(200).send(data);\n  })\n  .catch((err) => {\n    console.error(\"Error: Failed to store like info in Report Table in 'report.js': \", err);\n    res.status(500).end();\n  });\n\n};\n\nexport default report;\n"],"sourceRoot":"/source/"}